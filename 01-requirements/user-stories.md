# Requirements (User Stories)

Источник требований:
- Регистрация / Логин / Восстановление пароля — user stories из внутренней документации.
- Поиск / поиск по фото — user stories из внутренней документации.

Формат: краткие user stories + проверяемые критерии приемки (AC) и правила валидации.  
Окружение: Web, браузер Chrome (desktop). Региональная направленность: РФ, BY, KZ (телефон +7 / +375).

---

## Auth

### US-LOGIN-1 — Вход (Login)
Ожидания:
- На форме входа отображаются поля: **Логин (Email)** и **Пароль**.
- Кнопка **«Войти»** неактивна, если хотя бы одно из полей пустое.
- При вводе неверных данных отображается ошибка: **«Неверный логин или пароль»**.
- При успешном входе пользователь авторизуется, модальное окно закрывается, отображается состояние авторизации (отображается профиль/ЛК).
- На форме входа есть ссылки: **«Регистрация»** и **«Забыли пароль? Восстановить»** (доступны всегда).

AC (критерии приемки):
- Если хотя бы одно поле пустое → «Войти» disabled.
- Если логин/пароль неверные → показ ошибки, авторизация не происходит.
- Если логин/пароль верные → авторизация успешна, пользователь видит авторизованное состояние.

---

### US-LOGIN-2 — Восстановление пароля (Password recovery)
Ожидания:
- На форме входа есть ссылка **«Забыли пароль? Восстановить»**, открывающая окно восстановления.
- В окне восстановления есть поле ввода **Email**.
- При отправке запроса система инициирует восстановление (ссылка).
- При успехе пользователь получает подтверждение (сообщение на экране) и дальнейшие инструкции.
- Некорректный формат Email должен быть обработан сообщением об ошибке.

AC:
- Переход по «Восстановить» открывает форму восстановления.
- Валидный Email → запрос отправляется, пользователь видит подтверждение.
- Невалидный ввод → пользователь видит понятное сообщение об ошибке, запрос не отправляется.

---

### US-REG-1 — Регистрация (Registration)
Ожидания:
- На форме регистрации отображаются поля: **ФИО**, **Email**, **Телефон (+7/+375)**, **Пароль**, **Повтор пароля**.
- Кнопка **«Получить код»** доступна только при корректно введенном телефоне.
- Email проходит проверку формата.
- Пароль соответствует минимальным требованиям: **не менее 8 символов**.
- Пароль и повтор пароля должны совпадать; иначе показывается ошибка **«Пароли не совпадают»**.
- Кнопка **«Зарегистрироваться»** доступна только при корректно заполненных данных и обязательном согласии.
- При успешной регистрации отображается сообщение **«Регистрация прошла успешно»** и пользователь переводится на форму входа.

AC:
- Некорректный телефон → «Получить код» disabled + ошибка/подсказка.
- Некорректный email → ошибка формата.
- Некорректный код из СМС → регистрация недоступна.
- Пароль < 8 символов → ошибка/подсказка + регистрация недоступна.
- Пароли не совпадают → ошибка «Пароли не совпадают».
- Все данные валидны → регистрация успешна, показывается подтверждение.

Правила валидации (минимум):
- Телефон: формат **+7** / **+375** и требуемая длина номера (по маске).
- Email: базовая проверка формата `name@domain`.
- Пароль: длина **≥8**.

---

### US-REG-2 — Сообщения об ошибках / ошибки сервера
Ожидания:
- Для Email при неверном формате отображается сообщение: **«Введите корректную почту»**.
- Для телефона при неверном формате отображается сообщение: **«Введите корректный номер телефона в формате +7 … / +375 …»**.
- Для паролей при несовпадении отображается сообщение: **«Пароли не совпадают»**.
- При серверной ошибке отображается сообщение: **«Произошла ошибка, попробуйте позже»**, без “падения” интерфейса.

AC:
- Ошибки отображаются рядом с полем или в виде общего уведомления и не исчезают мгновенно.
- Серверные ошибки не приводят к зависанию/поломке формы; пользователь может повторить действие.

---

## Search

### US-SRCH-1 — Поиск по строке
Ожидания:
- На сайте доступен инпут поиска (в шапке) и кнопка/иконка **«лупа»**.
- Поиск запускается по **Enter** и/или по клику на **лупу**.
- После запуска пользователь видит блок результатов поиска.

AC:
- Enter/клик по лупе при введенном запросе → открывается выдача по запросу.
- Пустой запрос → поиск не выполняется.

---

### US-SRCH-2 — Выдача результатов + блок поиска по фото
Ожидания:
- В выдаче отображается счетчик: **«Найдено товаров: X»**.
- В выдаче отображаются карточки товаров (минимум: изображение/название/цена).
- В выдаче присутствует блок **«Найдите запчасти по фото»**, открывающий форму/модальное окно загрузки.

AC:
- Счетчик результатов отображается корректно.
- Переход в поиск по фото работает и открывает форму.

---

### US-SRCH-3 — Теги/подсказки уточнения
Ожидания:
- Под строкой поиска могут отображаться **теги** уточнения запроса.
- Клик по тегу уточняет поиск (изменяет выдачу).
- Если уточнений нет — теги **не показываются**.

AC:
- При наличии уточняющих тегов они отображаются и кликабельны.
- Клик по тегу обновляет выдачу по выбранному уточнению.

---

### US-SRCH-4 — Пустая выдача
Ожидания:
- Если результатов нет, отображается состояние **«Ничего не найдено»**.
- В пустом состоянии есть кнопка **«Перейти в каталог»** для продолжения навигации.

AC:
- При 0 результатов отображается **«Ничего не найдено»** + кнопка перехода в каталог.

---

### US-SRCH-5 — Поиск по фото (ИИ): форма и валидации
Ожидания:
- По клику **«Найдите запчасти по фото»** открывается форма загрузки.
- Обязательное поле: **файл (фото)**.
- Допустимые форматы файла: **JPG/JPEG, PNG**.
- Максимальный размер файла: **до 10 МБ**.
- Пока фото не загружено, кнопка **«Отправить»** неактивна.
- При попытке загрузить файл неподдерживаемого формата или превышающий лимит размера пользователь видит понятное сообщение об ошибке.
- После отправки фото запускается обработка (ИИ) и пользователь получает результаты поиска по фото (если доступны).

AC:
- Без файла → отправка заблокирована, «Отправить» disabled.
- При загруженном файле валидного формата и размера → отправка доступна.
- При неподдерживаемом формате → отображается ошибка, отправка недоступна.
- При превышении лимита размера → отображается ошибка, отправка недоступна.
- После отправки → отображается блок результатов поиска по фото или состояние “ничего не найдено” (если совпадений нет).

---

### US-SRCH-6 — Поиск по фото (ИИ): результаты и ошибки обработки
Ожидания:
- После успешной обработки фото отображается **выдача схожих запчастей** на основании анализа изображения (ИИ).
- Результаты отображаются в виде списка/карточек товаров, аналогично обычному поиску (минимум: название/изображение/цена).
- Если совпадений нет, отображается состояние **«Ничего не найдено»** (или эквивалент) и пользователь может продолжить поиск.
- Если обработка не удалась (ошибка сервера/ИИ), отображается сообщение **«Не удалось обработать изображение.»**.
- Если обработка занимает заметное время, пользователь видит индикатор загрузки (loader) до получения результата.

AC:
- Если обработка успешна и совпадения есть → отображаются результаты поиска по фото.
- Если совпадений нет → отображается **«Ничего не найдено»** + возможность вернуться к поиску/каталогу.
- Если произошла ошибка обработки → отображается сообщение об ошибке, пользователь может повторить попытку.
- Во время обработки отображается loader; интерфейс не “зависает”.
- Пользователь может закрыть окно/вернуться к поиску без потери работоспособности интерфейса.
